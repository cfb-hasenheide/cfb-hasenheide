%ul.list-group.list-group-flush
  - %i(yes waiting maybee no watch pending).each do |status|
    - if status == :waiting
      - status_attendances = attendances.send(status).order(:updated_at)

    - else
      - status_attendances = attendances.send(status).order('players.nickname')

    - if status_attendances.present?
      = link_to "##{status}",
        class: 'list-group-item list-group-item-action flex-column align-items-start',
        role: 'button',
        'data-toggle' => 'collapse',
        'aria-expanded' => 'false',
        'aria-controls' => status do

        .d-flex.w-100.justify-content-between.align-items-center
          %h4.mb-1
            = t(status, scope: %w(activerecord enums attendance status))

          %span.badge.badge-dark.badge-pill
            = status_attendances.count

        .collapse.list-group-item-text{id: status, class: ('show' if status == :yes)}
          %ul.list-unstyled
            = render status_attendances || 'Keine Meldungen vorhanden'
